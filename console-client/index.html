<html>
    <head>
        <title>Python Radio Console</title>

        <!-- Topcoat CSS -->
        <link rel="stylesheet" type="text/css" href="css/topcoat-mobile-dark.css">

        <!-- CSS.gg Icons -->
        <link href='https://css.gg/css' rel='stylesheet'>

        <!-- Custom CSS -->
        <link rel="stylesheet" type="text/css" href="css/custom.css">

        <!-- JQuery -->
        <script type="text/javascript" src="jquery-3.6.0.min.js"></script>

        <!-- DayJS -->
        <script type="text/javascript" src="dayjs.min.js"></script>
        <script type="text/javascript" src="https://unpkg.com/dayjs@1.8.21/plugin/utc.js"></script>
        <script>dayjs.extend(window.dayjs_plugin_utc)</script>

        <!-- js-cookie -->
        <script type="text/javascript" src="js.cookie.min.js"></script>

        <!-- audio resampler -->
        <script type="text/javascript" src="wave-resampler.js"></script>
    </head>
    <body>
        <!-- Top Nav Bar -->
        <div id="navbar">

            <!-- Menu Dropdown -->
            <div class="navbar-item">
                <button id="button-mainmenu" class="topcoat-button--quiet" onclick="toggleMainMenu()">
                    <ion-icon name="menu-sharp"></ion-icon>
                </button>
            </div>

            <!-- Logo and Title -->
            <div id="navbar-logo" class="navbar-item">RadioConsole</div>

            <!-- Version -->
            <div id="navbar-version" class="navbar-item">VERSION</div>

            <!-- Separator -->
            <!--<div id="navbar-separator" class="navbar-item"> - </div>-->

            <!-- Server Status -->
            <!--<div id="navbar-status" class="navbar-item">Disconnected</div>-->

            <!-- Clock -->
            <div id="navbar-clock">
                <div id="clock"></div>>
            </div>

            <!-- Volume Slider -->
            <div id="navbar-volume" class="navbar-item">
                <ion-icon name="volume-medium-sharp"></ion-icon>
                <input type="range" class="topcoat-range" id="console-volume" value="75" oninput="changeVolume()" disabled>
            </div>

            <!-- Mic & Speaker Volume Meters -->
            <div id="navbar-meters" class="navbar-item">
                <div class="meter-container">
                    <ion-icon name="mic-sharp"></ion-icon>
                    <meter id="meter-mic" min="0" max="0.4" high="0.3"></meter>
                </div>
                <div class="meter-container">
                    <ion-icon name="volume-off-sharp"></ion-icon>
                    <meter id="meter-spkr" min="0" max="0.4" high="0.3"></meter>
                </div>
            </div>

            <!-- Clear Float -->
            <br class="navbar-clear" />
        </div>

        <!-- Main Body -->
        <div id="body">
            <!-- Sidebar Menu -->
            <div class="sidebar sidebar-closed" id="sidebar-mainmenu">
                <ul>
                    <li>
                        <a href="#" onclick="showConfigPopup('#server-config-popup');toggleMainMenu();">
                            <span class="sidebar-icon"><ion-icon name="server-sharp"></ion-icon></span>
                            <span class="sidebar-item">Server Config</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showConfigPopup('#client-config-popup');toggleMainMenu();">
                            <span class="sidebar-icon"><ion-icon name="settings-sharp"></ion-icon></span>
                            <span class="sidebar-item">Client Config</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="sidebar-icon"><ion-icon name="information-circle-sharp"></ion-icon></span>
                            <span class="sidebar-item">About</span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Main Layout for Radio Entries -->
            <div id="main-layout">

                <!-- Placeholder radio card for development -->
                <div class="radio-card blue">
                    <div class="card">
                        <div class="selected-tab"></div>
                        <!-- Header -->
                        <div class="header">
                            <h2>Placeholder Name</h2>
                            <div class="icon-stack">
                                <!-- Pan Dropdown -->
                                <a href="#" onclick="showPanMenu(event, this)" class="enabled"><ion-icon name="headset-sharp" id="icon-panning"></ion-icon></a>
                                    <div class="panning-dropdown closed">
                                        <!- - Slider - ->
                                        <input type="range" class="topcoat-range" class="radio-pan" min="-1" max="1" value="0" step="0.1" onclick="stopClick(event, this)" oninput="changePan(event, this)" ondblclick="centerPan(event, this)">
                                    </div>
                                <!-- Mute Button -->
                                <a href="#" onclick="toggleMute(event, this)" class="enabled"><ion-icon name="volume-high-sharp" id="icon-mute"></ion-icon></a>
                                <!-- Connection Icon -->
                                <a href="#" onclick="connectButton(event, this)" title="Disconnected"><ion-icon name="wifi-sharp" class="icon-connect disconnected"></ion-icon></a>
                            </div>
                        </div>
                        <!-- Content -->
                        <div class="content">
                            <div id="zone-text">Zone Text</div>
                            <div id="channel-text">Channel Text</div>
                            <!-- RX Audio Bar -->
                            <div class="audio-bar">
                                <ion-icon name="volume-off-sharp"></ion-icon>
                                <div class="eq-frame">
                                    <div class="eq-bar"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Placeholder radio card for development -->
                <div class="radio-card green">
                    <div class="card">
                        <div class="selected-tab"></div>
                        <!-- Header -->
                        <div class="header">
                            <h2>Placeholder Name</h2>
                            <div class="icon-stack">
                                <!-- Pan Dropdown -->
                                <a href="#" onclick="showPanMenu(event, this)" class="enabled"><ion-icon name="headset-sharp" id="icon-panning"></ion-icon></a>
                                    <div class="panning-dropdown closed">
                                        <!- - Slider - ->
                                        <input type="range" class="topcoat-range" class="radio-pan" min="-1" max="1" value="0" step="0.1" onclick="stopClick(event, this)" oninput="changePan(event, this)" ondblclick="centerPan(event, this)">
                                    </div>
                                <!-- Mute Button -->
                                <a href="#" onclick="toggleMute(event, this)" class="enabled"><ion-icon name="volume-high-sharp" id="icon-mute"></ion-icon></a>
                                <!-- Connection Icon -->
                                <a href="#" onclick="connectButton(event, this)" title="Disconnected"><ion-icon name="wifi-sharp" class="icon-connect disconnected"></ion-icon></a>
                            </div>
                        </div>
                        <!-- Content -->
                        <div class="content">
                            <div id="zone-text">Zone Text</div>
                            <div id="channel-text">Channel Text</div>
                            <!-- RX Audio Bar -->
                            <div class="audio-bar">
                                <ion-icon name="volume-off-sharp"></ion-icon>
                                <div class="eq-frame">
                                    <div class="eq-bar"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Placeholder radio card for development -->
                <div class="radio-card purple">
                    <div class="card">
                        <div class="selected-tab"></div>
                        <!-- Header -->
                        <div class="header">
                            <h2>Placeholder Name</h2>
                            <div class="icon-stack">
                                <!-- Pan Dropdown -->
                                <a href="#" onclick="showPanMenu(event, this)" class="enabled"><ion-icon name="headset-sharp" id="icon-panning"></ion-icon></a>
                                    <div class="panning-dropdown closed">
                                        <!- - Slider - ->
                                        <input type="range" class="topcoat-range" class="radio-pan" min="-1" max="1" value="0" step="0.1" onclick="stopClick(event, this)" oninput="changePan(event, this)" ondblclick="centerPan(event, this)">
                                    </div>
                                <!-- Mute Button -->
                                <a href="#" onclick="toggleMute(event, this)" class="enabled"><ion-icon name="volume-high-sharp" id="icon-mute"></ion-icon></a>
                                <!-- Connection Icon -->
                                <a href="#" onclick="connectButton(event, this)" title="Disconnected"><ion-icon name="wifi-sharp" class="icon-connect disconnected"></ion-icon></a>
                            </div>
                        </div>
                        <!-- Content -->
                        <div class="content">
                            <div id="zone-text">Zone Text</div>
                            <div id="channel-text">Channel Text</div>
                            <!-- RX Audio Bar -->
                            <div class="audio-bar">
                                <ion-icon name="volume-off-sharp"></ion-icon>
                                <div class="eq-frame">
                                    <div class="eq-bar"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Placeholder text before connection to server -->
            <div id="text-placeholder" style="display: none;">
                <h2>Please connect to a server to begin.</h2>
            </div>

            <!-- Main Body Dimming Div -->
            <div id="body-dimmer" style="display: none;" onclick="closePopup()"></div>
        </div>

        <!-- Control Footer -->
        <div id="controlbar">

            <!-- Radio Controls -->
            <div id="radio-controls">

                <!-- Softkey Bar -->
                <div class="btn-bar">
                    <!-- Left Arrow -->
                    <div id="leftarrow" onclick="button_left()">
                        <ion-icon name="caret-back-sharp"></ion-icon>
                    </div>
                    <!-- Softkey 1 -->
                    <div id="softkey1" class="btn" onclick="softkey(1)">
                        <span class="softkey-text">BTN1</span>
                    </div>
                    <!-- Softkey 2 -->
                    <div id="softkey2" class="btn" onclick="softkey(2)">
                        <span class="softkey-text">BTN2</span>
                    </div>
                    <!-- Softkey 3 -->
                    <div id="softkey3" class="btn" onclick="softkey(3)">
                        <span class="softkey-text">BTN3</span>
                    </div>
                    <!-- Softkey 4 -->
                    <div id="softkey4" class="btn" onclick="softkey(4)">
                        <span class="softkey-text">BTN4</span>
                    </div>
                    <!-- Softkey 5 -->
                    <div id="softkey5" class="btn" onclick="softkey(5)">
                        <span class="softkey-text">BTN5</span>
                    </div>
                    <!-- Softkey 6 -->
                    <div id="softkey6" class="btn" onclick="softkey(6)">
                        <span class="softkey-text">BTN6</span>
                    </div>
                    <!-- Right Arrow -->
                    <div id="rightarrow" onclick="button_right()">
                        <ion-icon name="caret-forward-sharp"></ion-icon>
                    </div>
                </div>

                <!-- Channel Up/Down Buttons -->
                <div class="btn-bar" id="chan-btns">
                    <div id="chan-up" class="btn" onclick="changeChannel(false)">
                        <ion-icon name="caret-up-sharp"></ion-icon>
                    </div>
                    <div id="chan-down" class="btn" onclick="changeChannel(true)">
                        <ion-icon name="caret-down-sharp"></ion-icon>
                    </div>
                </div>

                <!-- PTT Button -->
                <div class="btn-bar" id="ptt-btn">
                    <div id="ptt" class="btn" onmousedown="startPtt()" onmouseup="stopPtt()"></div>
                </div>

            </div>
            
        </div>

        <!-- Server Config Popup -->
        <div id="server-config-popup" class="popup" style="display: none;">
            <div class="popup-header">
                <h2>Server Config</h2>
                <div class="popup-buttons">
                    <a href="#" onclick="closePopup(this)"><ion-icon name="close-circle-sharp"></ion-icon></a>
                </div>
            </div>
            <div class="popup-content">
                <table class="popup-table">
                    <!-- Connect / Disconnect Button -->
                    <tr>
                        <td></td>
                        <td>
                            <button class="topcoat-button--cta" id="server-connectall-btn" onclick="connectAllButton()">Connect All</button>
                        </td>
                    </tr>
                    <!-- Auto-connect -->
                    <tr>
                        <td>
                            <h3>Auto-Connect</h3>
                        </td>
                        <td>
                            <label class="topcoat-checkbox">
                                <input type="checkbox" id="server-autoconnect">
                                <div class="topcoat-checkbox__checkmark"></div>
                            </label>
                        </td>
                    </tr>
                    <!-- Save Button -->
                    <tr>
                        <td></td>
                        <td>
                            <button class="topcoat-button--cta" onclick="saveServerConfig()">Save</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Client Config Popup -->
        <div id="client-config-popup" class="popup" style="display: none;">
            <div class="popup-header">
                <h2>Client Config</h2>
                <div class="popup-buttons">
                    <a href="#" onclick="closePopup(this)"><ion-icon name="close-circle-sharp"></ion-icon></a>
                </div>
            </div>
            <div class="popup-content">
                <table class="popup-table">
                    <!-- Time Format -->
                    <tr>
                        <td width="33%">
                            <h3>Time Format</h3>
                        </td>
                        <td width="67%">
                            <select id="client-timeformat">
                                <option value="Local">Local</option>
                                <option value="UTC">UTC</option>
                            </select>
                        </td>
                    </tr>
                    <!-- RX AGC Toggle -->
                    <tr>
                        <td width="33%">
                            <h3>RX Audio AGC</h3>
                        </td>
                        <td width="67%">
                            <label class="topcoat-checkbox">
                                <input type="checkbox" id="client-rxagc">
                                <div class="topcoat-checkbox__checkmark"></div>
                            </label>
                        </td>
                    </tr>
                    <!-- Unselected Radio Volume -->
                    <tr>
                        <td width="33%">
                            <h3>Unselected Radio Volume</h3>
                        </td>
                        <td width="67%">
                            <select id="unselected-vol">
                                <option value=0 selected="selected">0 dB</option>
                                <option value=-3>-3 dB</option>
                                <option value=-6>-6 dB</option>
                                <option value=-9>-9 dB</option>
                                <option value=-12>-12 dB</option>
                                <option value=-100>Muted</option>
                            </select>
                        </td>
                    </tr>
                    <!-- TPT Tone Selection -->
                    <tr>
                        <td width="33%">
                            <h3>Talk Permit Tone</h3>
                        </td>
                        <td width="67%">
                            <select id="tpt-tone">
                                <option value="mot" selected="selected">Motorola</option>
                                <option value="kw">Kenwood</option>
                            </select>
                        </td>
                    </tr>
                    <!-- Save Config Button -->
                    <tr>
                        <td></td>
                        <td>
                            <button class="topcoat-button--cta" onclick="saveClientConfig()">Save</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Sound Files -->
        <audio src="sound/tx_tpt_mot.wav" id="sound-tpt-mot" autostart="false" autostart="0"></audio>
        <audio src="sound/tx_tpt_kw.wav" id="sound-tpt-kw" autostart="false" autostart="0"></audio>
        <audio src="sound/tx_end.wav" id="sound-tx-end" autostart="false" autostart="0"></audio>

        <!-- Icon Script -->
        <script type="module" src="ionicons/index.esm.js"></script>
        <script nomodule src="ionicons/ionicons.js"></script>
        <!-- Runtime Script -->
        <script type="text/javascript" src="client.js"></script>
    </body>
    
</html>